name: Post Release
on:
  push:
    branches:
      - master
  workflow_dispatch:

jobs:
  install:
    name: Install
    runs-on: ubuntu-latest
    steps:
      - name: ⏬ Checkout repository
        uses: actions/checkout@v3

      - name: 🔰 Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 18.x
          cache: npm

      - name: 📦 Install dependencies
        run: npm install

  # coverage:
  #   name: Coverage
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: 🧪 Test and Coverage
  #       uses: ambersun1234/hardhat-test-action@v1
  #       run: npm run coverage

  #     - name: 📑 Extract total coverage percentage
  #       run: |
  #         coverage_percentage=$(cat ./coverage/index.html | \
  #             grep -o 'class="strong">[0-9]*% ' | \
  #             sed 's/class="strong">//g' | \
  #             awk '{ sum += int($1); count++ } END { print sum/count }')
  #         echo "Total Coverage Percentage: $coverage_percentage%"
  #       shell: bash

  #     - name: 🔢 Use the coverage_percentage variable in further steps
  #       run: echo "The coverage percentage is $coverage_percentage%"
